<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Series Quirks</title>
    
    <!-- MathJax -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #2c3e50;
            overflow: hidden;
        }

        .presentation {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 85vw;
            max-width: 1000px;
            height: 75vh;
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            overflow-y: auto;
            position: absolute;
        }

        .slide.active {
            display: block;
            position: relative;
        }

        /* Typography */
        h1 {
            font-size: 2.2rem;
            font-weight: 300;
            color: #2c3e50;
            margin-bottom: 1.2rem;
            line-height: 1.2;
        }

        h2 {
            font-size: 1.7rem;
            font-weight: 300;
            color: #2c3e50;
            margin-bottom: 1.2rem;
            line-height: 1.3;
        }

        h3 {
            font-size: 1.2rem;
            font-weight: 400;
            color: #34495e;
            margin-bottom: 0.8rem;
        }

        p {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #5a6c7d;
            margin-bottom: 1rem;
        }

        ul {
            list-style: none;
            margin-bottom: 1rem;
        }

        li {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #5a6c7d;
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        li::before {
            content: "•";
            color: #3498db;
            position: absolute;
            left: 0;
            font-size: 1.2rem;
        }

        /* Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: start;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            align-items: start;
        }

        /* Content blocks */
        .highlight {
            background: #ecf0f1;
            padding: 1.2rem;
            border-radius: 4px;
            border-left: 4px solid #3498db;
            margin: 1rem 0;
        }



        .formula {
            background: #fdfdfd;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            padding: 1.2rem;
            margin: 1rem 0;
            text-align: center;
        }

        .example {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* Visualization */
        .viz {
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            padding: 0.8rem;
            margin: 0.8rem 0;
            background: white;
            min-height: 250px;
        }

        /* Title slide */
        .title-slide {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .title-slide h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 2.5rem;
        }

        .objectives {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            max-width: 700px;
            margin: 0 auto;
        }

        .objective {
            background: #f8f9fa;
            padding: 1.2rem;
            border-radius: 4px;
            text-align: left;
        }

        .objective h3 {
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .objective p {
            margin-bottom: 0;
            font-size: 1rem;
        }

        .counter {
            position: fixed;
            bottom: 30px;
            left: 30px;
            color: #7f8c8d;
            font-size: 14px;
        }

        /* Time series specific styles */
        .timeline {
            stroke: #2c3e50;
            stroke-width: 2px;
            fill: none;
        }

        .data-point {
            fill: #3498db;
            stroke: #2980b9;
            stroke-width: 1px;
        }

        .train-data {
            fill: #2ecc71;
            opacity: 0.7;
        }

        .test-data {
            fill: #e74c3c;
            opacity: 0.7;
        }

        .validation-data {
            fill: #f39c12;
            opacity: 0.7;
        }

        .leak-indicator {
            stroke: #e74c3c;
            stroke-width: 3px;
            stroke-dasharray: 5,5;
        }

        /* Comparison table */
        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0.5rem;
            margin: 1rem 0;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .table-header {
            background: #3498db;
            color: white;
            padding: 0.8rem;
            font-weight: bold;
            text-align: center;
        }

        .table-cell {
            background: #f8f9fa;
            padding: 0.8rem;
            border: 1px solid #e9ecef;
            text-align: center;
            font-size: 0.85rem;
        }

        .do-dont {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .do, .dont {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 1rem;
            border-radius: 4px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .slide {
                width: 95vw;
                height: 85vh;
                padding: 25px;
            }
            
            h1 { font-size: 2rem; }
            h2 { font-size: 1.6rem; }
            
            .grid-2, .grid-3, .objectives {
                grid-template-columns: 1fr;
                gap: 1.2rem;
            }
            
            .title-slide h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Slide 1: Title -->
        <div class="slide active title-slide" id="slide1">
            <h1>Time Series Quirks</h1>
            <p class="subtitle">Essential Tricks and Pitfalls for Time Series Analysis</p>
            
            <div class="objectives">
                <div class="objective">
                    <h3>Data Leakage Prevention</h3>
                    <p>Avoid future information contamination</p>
                </div>
                <div class="objective">
                    <h3>Proper Cross-Validation</h3>
                    <p>Time-aware validation strategies</p>
                </div>
                <div class="objective">
                    <h3>Cold Start Solutions</h3>
                    <p>Handle insufficient historical data</p>
                </div>
                <div class="objective">
                    <h3>Real-World Irregularities</h3>
                    <p>Missing data, outliers, and structural breaks</p>
                </div>
            </div>
        </div>

        <!-- Slide 2: Data Leakage and Temporal Ordering -->
        <div class="slide" id="slide2">
            <h2>Data Leakage: The Silent Model Killer</h2>
            
            <div class="highlight">
                <p><strong>Critical Rule:</strong> Never use future information to predict the past. This destroys model validity in production.</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3>Common Leakage Sources</h3>
                    <ul>
                        <li><strong>Global Normalization:</strong> Using entire dataset statistics</li>
                        <li><strong>Forward-Looking Features:</strong> Future-shifted variables</li>
                        <li><strong>Target Encoding:</strong> Using full target distribution</li>
                        <li><strong>Lag Feature Errors:</strong> Accidentally including t+1 data</li>
                    </ul>
                    
                    <div class="do-dont">
                        <div class="do">
                            <h4>✓ DO</h4>
                            <ul>
                                <li>Rolling window statistics</li>
                                <li>Expanding window normalization</li>
                                <li>Proper lag alignment</li>
                            </ul>
                        </div>
                        <div class="dont">
                            <h4>✗ DON'T</h4>
                            <ul>
                                <li>Full dataset scaling</li>
                                <li>Future target values</li>
                                <li>Look-ahead bias</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="viz" id="leakage-viz" style="height: 180px;">
                        <div style="height: 100%; display: flex; align-items: center; justify-content: center; color: #95a5a6;">
                            Data Leakage Visualization
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: Proper Normalization -->
        <div class="slide" id="slide3">
            <h2>Proper Normalization for Time Series</h2>
            
            <div class="highlight">
                <p><strong>Key Principle:</strong> Normalization parameters must be computed only on historical data available at prediction time.</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3>Expanding Window</h3>
                    <p>$$\mu_t = \frac{1}{t}\sum_{i=1}^{t} x_i$$ - Uses all available history</p>
                    
                    <h3>Rolling Window</h3>
                    <p>$$\mu_t = \frac{1}{w}\sum_{i=t-w+1}^{t} x_i$$ - Uses fixed recent window</p>
                </div>
                
                <div>
                    <h3>Implementation</h3>
                    <ul>
                        <li><strong>Training:</strong> Fit scaler on training data only</li>
                        <li><strong>Validation:</strong> Transform using training parameters</li>
                        <li><strong>Production:</strong> Update parameters with new data</li>
                        <li><strong>Never:</strong> Use entire dataset for scaling!</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 4: Cross-Validation for Time Series -->
        <div class="slide" id="slide4">
            <h2>Time Series Cross-Validation</h2>
            
            <div class="highlight">
                <p><strong>Never use standard K-fold CV for time series!</strong> It violates temporal ordering and creates data leakage.</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3>Time Series Split</h3>
                    <ul>
                        <li>Sequential splits respecting time order</li>
                        <li>Each fold uses only past data for training</li>
                        <li>Future data never used to predict past</li>
                    </ul>
                    
                    <h3>Walk-Forward Analysis</h3>
                    <ul>
                        <li>Sliding window of fixed size</li>
                        <li>Retrain model at each step</li>
                        <li>Most realistic for production</li>
                    </ul>
                </div>
                
                <div>
                    <div class="viz" id="cv-viz" style="height: 200px;">
                        <div style="height: 100%; display: flex; align-items: center; justify-content: center; color: #95a5a6;">
                            Time Series CV Methods
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 5: Cold Start Problem -->
        <div class="slide" id="slide5">
            <h2>Cold Start and Bootstrapping</h2>
            
            <div class="highlight">
                <p><strong>Cold Start Problem:</strong> How do you predict when you have little or no historical data?</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3>Transfer Learning Approaches</h3>
                    <ul>
                        <li><strong>Global Models:</strong> Train on all available series</li>
                        <li><strong>Similar Series:</strong> Find analogous time series</li>
                        <li><strong>Meta-Learning:</strong> Learn how to adapt quickly</li>
                        <li><strong>Hierarchical Models:</strong> Use category-level patterns</li>
                    </ul>
                </div>
                
                <div>
                    <h3>Practical Strategies</h3>
                    <ul>
                        <li><strong>Simple Models First:</strong> Moving averages, exponential smoothing</li>
                        <li><strong>External Features:</strong> Leverage related variables</li>
                        <li><strong>Seasonal Patterns:</strong> Apply known seasonality</li>
                        <li><strong>Business Rules:</strong> Incorporate domain constraints</li>
                    </ul>
                </div>
            </div>
            

        </div>

        <!-- Slide 6: Handling Non-Stationarity -->
        <div class="slide" id="slide6">
            <h2>Non-Stationarity: When Data Changes</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Detection Methods</h3>
                    <ul>
                        <li><strong>Augmented Dickey-Fuller Test:</strong> Test for unit roots</li>
                        <li><strong>KPSS Test:</strong> Test for stationarity</li>
                        <li><strong>Visual Inspection:</strong> Plot series and check patterns</li>
                        <li><strong>Rolling Statistics:</strong> Check for changing mean/variance</li>
                    </ul>
                    
                    <h3>Transformation Techniques</h3>
                    <ul>
                        <li><strong>Differencing:</strong> Remove trends</li>
                        <li><strong>Log Transform:</strong> Stabilize variance</li>
                        <li><strong>Seasonal Decomposition:</strong> Separate components</li>
                        <li><strong>Box-Cox:</strong> Normalize distributions</li>
                    </ul>
                </div>
                
                <div>
                    <div class="formula">
                        <h4>First Difference</h4>
                        $$\Delta x_t = x_t - x_{t-1}$$
                    </div>
                    
                    <div class="formula">
                        <h4>Seasonal Difference</h4>
                        $$\Delta_s x_t = x_t - x_{t-s}$$
                    </div>
                    
                    <div class="example">
                        <strong>Model Choice:</strong> ARIMA requires stationarity, while LSTM and Prophet handle non-stationary data directly.
                    </div>
                </div>
            </div>
            

        </div>

        <!-- Slide 7: Dealing with Irregularities -->
        <div class="slide" id="slide7">
            <h2>Real-World Data Irregularities</h2>
            
            <div class="grid-3">
                <div>
                    <h3>Missing Data</h3>
                    <ul>
                        <li><strong>Forward Fill:</strong> Use last observation</li>
                        <li><strong>Interpolation:</strong> Linear, spline, or polynomial</li>
                        <li><strong>Seasonal Naive:</strong> Use same period from previous cycle</li>
                        <li><strong>Model-based:</strong> Kalman filter, EM algorithm</li>
                    </ul>
                </div>
                
                <div>
                    <h3>Outlier Detection</h3>
                    <ul>
                        <li><strong>Statistical:</strong> Z-score, IQR methods</li>
                        <li><strong>Seasonal:</strong> STL decomposition residuals</li>
                        <li><strong>Model-based:</strong> Prediction intervals</li>
                        <li><strong>Domain-specific:</strong> Business rule violations</li>
                    </ul>
                </div>
                
                <div>
                    <h3>Structural Breaks</h3>
                    <ul>
                        <li><strong>Change Point Detection:</strong> CUSUM, PELT algorithms</li>
                        <li><strong>Regime Switching:</strong> Markov models</li>
                        <li><strong>Adaptive Models:</strong> Forget past gradually</li>
                        <li><strong>Model Retraining:</strong> Detect and retrain</li>
                    </ul>
                </div>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3>Calendar Effects</h3>
                    <ul>
                        <li>Holiday impacts and moving holidays</li>
                        <li>Day-of-week and month-of-year effects</li>
                        <li>Leap years and varying month lengths</li>
                        <li>Business vs calendar days</li>
                    </ul>
                </div>
                
                <div>
                    <h3>Irregular Sampling</h3>
                    <ul>
                        <li>Non-uniform time intervals</li>
                        <li>Event-driven observations</li>
                        <li>Multiple sampling frequencies</li>
                        <li>Alignment across series</li>
                    </ul>
                </div>
            </div>
            

        </div>

        <!-- Slide 8: Performance Evaluation -->
        <div class="slide" id="slide8">
            <h2>Evaluation: Beyond Standard Metrics</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Time Series Specific Metrics</h3>
                    <ul>
                        <li><strong>MASE:</strong> Mean Absolute Scaled Error</li>
                        <li><strong>sMAPE:</strong> Symmetric Mean Absolute Percentage Error</li>
                        <li><strong>Direction Accuracy:</strong> Trend prediction correctness</li>
                        <li><strong>Prediction Intervals:</strong> Coverage and width</li>
                    </ul>
                    
                    <div class="formula">
                        <h4>MASE Formula</h4>
                        $$MASE = \frac{MAE}{MAE_{naive}}$$
                        <p>Scales error relative to naive forecast</p>
                    </div>
                </div>
                
                <div>
                    <h3>Business-Relevant Evaluation</h3>
                    <ul>
                        <li><strong>Cost-Sensitive Metrics:</strong> Asymmetric loss functions</li>
                        <li><strong>Forecast Horizons:</strong> Different accuracies for different leads</li>
                        <li><strong>Decision-Based:</strong> Impact on actual decisions</li>
                        <li><strong>Robustness:</strong> Performance during unusual periods</li>
                    </ul>
                    
                    <div class="example">
                        <strong>Evaluation Period:</strong> Test on representative periods including seasonal cycles and business changes.
                    </div>
                </div>
            </div>
            
            <div class="example">
                <strong>Testing Types:</strong> Out-of-sample (standard), Out-of-time (most realistic), Backtesting (historical simulation).
            </div>
        </div>

        <!-- Slide 9: Best Practices Checklist -->
        <div class="slide" id="slide9">
            <h2>Time Series Best Practices</h2>
            
            <div class="grid-2">
                <div>
                    <h3>✓ Data Preparation</h3>
                    <ul>
                        <li>Handle missing values appropriately</li>
                        <li>Use expanding/rolling window normalization</li>
                        <li>Test for stationarity and transform if needed</li>
                        <li>Handle calendar effects</li>
                    </ul>
                    
                    <h3>✓ Model Development</h3>
                    <ul>
                        <li>Use time-aware cross-validation</li>
                        <li>Proper train/validation/test splits</li>
                        <li>Consider cold start strategies</li>
                        <li>Monitor for concept drift</li>
                    </ul>
                </div>
                
                <div>
                    <h3>✓ Evaluation</h3>
                    <ul>
                        <li>Use business-relevant metrics</li>
                        <li>Test on representative periods</li>
                        <li>Implement walk-forward validation</li>
                        <li>Monitor prediction intervals</li>
                    </ul>
                    
                    <h3>⚠️ Red Flags</h3>
                    <ul>
                        <li>Perfect accuracy (likely data leakage)</li>
                        <li>Works in dev, fails in production</li>
                        <li>Performance too good to be true</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 10: Summary -->
        <div class="slide" id="slide10">
            <h2>Key Takeaways: Time Series Quirks</h2>
            
            <div class="highlight">
                <p><strong>Time series modeling requires fundamentally different approaches from cross-sectional data analysis. Respect the temporal structure or your models will fail in production.</strong></p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3>Critical Success Factors</h3>
                    <ul>
                        <li><strong>Temporal Integrity:</strong> Never violate time ordering</li>
                        <li><strong>Data Leakage Prevention:</strong> Use only historical information</li>
                        <li><strong>Proper Validation:</strong> Time-aware cross-validation methods</li>
                        <li><strong>Realistic Testing:</strong> Out-of-time evaluation</li>
                    </ul>
                    
                    <h3>Common Pitfall Prevention</h3>
                    <ul>
                        <li>Always check for data leakage first</li>
                        <li>Use domain expertise to validate results</li>
                        <li>Test on multiple time periods</li>
                        <li>Monitor models continuously in production</li>
                    </ul>
                </div>
                
                <div>
                    <h3>When Things Go Wrong</h3>
                    <ul>
                        <li><strong>Too-good performance:</strong> Look for data leakage</li>
                        <li><strong>Production failure:</strong> Check validation methodology</li>
                        <li><strong>Sudden accuracy drop:</strong> Investigate structural breaks</li>
                        <li><strong>Inconsistent results:</strong> Verify temporal ordering</li>
                    </ul>
                    
                    <div class="example">
                        <strong>Remember:</strong> Time series modeling is as much about avoiding mistakes as it is about sophisticated algorithms. Master the fundamentals before adding complexity.
                    </div>
                </div>
            </div>
            

        </div>
    </div>

    <!-- Navigation -->
    <div class="counter">
        <span id="current">1</span> / <span id="total">10</span>
    </div>

    <script>
        let currentSlide = 1;
        const totalSlides = 10;

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            if (n > totalSlides) currentSlide = 1;
            if (n < 1) currentSlide = totalSlides;
            
            slides.forEach(slide => slide.classList.remove('active'));
            slides[currentSlide - 1].classList.add('active');
            
            document.getElementById('current').textContent = currentSlide;
            
            // Initialize visualizations
            setTimeout(() => initViz(currentSlide), 100);
        }

        function nextSlide() {
            if (currentSlide < totalSlides) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }

        function previousSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') nextSlide();
            if (e.key === 'ArrowLeft') previousSlide();
        });

        // Visualization functions
        function initViz(slideNum) {
            console.log('Initializing visualization for slide:', slideNum);
            
            try {
                switch(slideNum) {
                    case 2:
                        createLeakageViz();
                        break;
                    case 4:
                        createCVViz();
                        break;
                }
            } catch (error) {
                console.error('Visualization error:', error);
            }
        }

        function createLeakageViz() {
            const container = d3.select('#leakage-viz');
            container.selectAll('*').remove();
            
            const width = 350;
            const height = 150;
            const margin = {top: 20, right: 20, bottom: 30, left: 40};
            
            const svg = container
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            // Timeline
            const timePoints = d3.range(20);
            const xScale = d3.scaleLinear()
                .domain([0, 19])
                .range([margin.left, width - margin.right]);
            
            // Draw timeline
            svg.append('line')
                .attr('x1', margin.left)
                .attr('y1', height/2)
                .attr('x2', width - margin.right)
                .attr('y2', height/2)
                .attr('stroke', '#2c3e50')
                .attr('stroke-width', 2);
            
            // Training data (green)
            timePoints.slice(0, 12).forEach(t => {
                svg.append('circle')
                    .attr('cx', xScale(t))
                    .attr('cy', height/2)
                    .attr('r', 4)
                    .attr('class', 'train-data');
            });
            
            // Test data (red)
            timePoints.slice(12).forEach(t => {
                svg.append('circle')
                    .attr('cx', xScale(t))
                    .attr('cy', height/2)
                    .attr('r', 4)
                    .attr('class', 'test-data');
            });
            
            // Data leakage arrow (dashed red line from future to past)
            svg.append('line')
                .attr('x1', xScale(15))
                .attr('y1', height/2 - 30)
                .attr('x2', xScale(8))
                .attr('y2', height/2 - 30)
                .attr('class', 'leak-indicator')
                .attr('marker-end', 'url(#arrow)');
            
            // Labels
            svg.append('text')
                .attr('x', xScale(6))
                .attr('y', height/2 + 20)
                .text('Training Data')
                .attr('text-anchor', 'middle')
                .attr('font-size', '12px')
                .attr('fill', '#2ecc71');
            
            svg.append('text')
                .attr('x', xScale(15))
                .attr('y', height/2 + 20)
                .text('Test Data')
                .attr('text-anchor', 'middle')
                .attr('font-size', '12px')
                .attr('fill', '#e74c3c');
            
            svg.append('text')
                .attr('x', xScale(11.5))
                .attr('y', height/2 - 40)
                .text('DATA LEAKAGE!')
                .attr('text-anchor', 'middle')
                .attr('font-size', '10px')
                .attr('fill', '#e74c3c')
                .attr('font-weight', 'bold');
            
            // Arrow marker
            svg.append('defs')
                .append('marker')
                .attr('id', 'arrow')
                .attr('markerWidth', 10)
                .attr('markerHeight', 7)
                .attr('refX', 9)
                .attr('refY', 3.5)
                .attr('orient', 'auto')
                .append('polygon')
                .attr('points', '0 0, 10 3.5, 0 7')
                .attr('fill', '#e74c3c');
        }

        function createCVViz() {
            const container = d3.select('#cv-viz');
            container.selectAll('*').remove();
            
            const width = 350;
            const height = 120;
            const margin = {top: 10, right: 20, bottom: 30, left: 40};
            
            const svg = container
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            const timePoints = d3.range(20);
            const xScale = d3.scaleLinear()
                .domain([0, 19])
                .range([margin.left, width - margin.right]);
            
            // Show 3 folds of time series CV
            const folds = [
                {train: [0, 8], val: [8, 12], y: 30},
                {train: [0, 12], val: [12, 16], y: 60},
                {train: [0, 16], val: [16, 20], y: 90}
            ];
            
            folds.forEach((fold, i) => {
                // Training data
                svg.append('rect')
                    .attr('x', xScale(fold.train[0]))
                    .attr('y', fold.y - 8)
                    .attr('width', xScale(fold.train[1]) - xScale(fold.train[0]))
                    .attr('height', 16)
                    .attr('fill', '#2ecc71')
                    .attr('opacity', 0.7);
                
                // Validation data
                svg.append('rect')
                    .attr('x', xScale(fold.val[0]))
                    .attr('y', fold.y - 8)
                    .attr('width', xScale(fold.val[1]) - xScale(fold.val[0]))
                    .attr('height', 16)
                    .attr('fill', '#e74c3c')
                    .attr('opacity', 0.7);
                
                // Fold label
                svg.append('text')
                    .attr('x', margin.left - 30)
                    .attr('y', fold.y + 4)
                    .text(`Fold ${i+1}`)
                    .attr('font-size', '10px')
                    .attr('text-anchor', 'middle');
            });
            
            // Legend
            svg.append('rect')
                .attr('x', width - 120)
                .attr('y', 10)
                .attr('width', 15)
                .attr('height', 10)
                .attr('fill', '#2ecc71')
                .attr('opacity', 0.7);
            
            svg.append('text')
                .attr('x', width - 100)
                .attr('y', 19)
                .text('Train')
                .attr('font-size', '10px');
            
            svg.append('rect')
                .attr('x', width - 60)
                .attr('y', 10)
                .attr('width', 15)
                .attr('height', 10)
                .attr('fill', '#e74c3c')
                .attr('opacity', 0.7);
            
            svg.append('text')
                .attr('x', width - 40)
                .attr('y', 19)
                .text('Val')
                .attr('font-size', '10px');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            showSlide(1);
        });
    </script>
</body>
</html>
